<md-dialog class="" aria-label="New Job Form'">

  <md-toolbar>
    <div class="md-toolbar-tools md-tall">
      <!--<h2>{{locals.LANG.POST.JOB_INVITATION.POST_DIALOG_TITLE}}</h2>-->
      <h2>New Form</h2>
      <span flex></span>
      <md-button ng-click="jobFormCreateCtrl.cancel()"
                 class="md-icon-button"
                 aria-label="Close">
        <md-icon md-font-icon="icon icon-close"
                 class="toolbar-icon"></md-icon>
      </md-button>
    </div>
  </md-toolbar>
  <md-dialog-content class="dialog-custom">

    <md-list>

      <md-list-item class="md-3-line">
        <div class="md-list-item-text">
          <h3>
            <small><b class="color-light">Add Form </b></small>
            <br/>
            <b>{{template.name}}</b></h3>

          <p ng-class="{'text-ellipsis': !ui.isTemplateDescExpanded}"
             ng-click="ui.isTemplateDescExpanded = !ui.isTemplateDescExpanded">
            <i class="color-light push-right pr-sm">Description: </i>
            <span>{{template.desc}}</span></p>
        </div>
        <md-divider></md-divider>
      </md-list-item>

      <md-list-item class="md-3-line">
        <div class="md-list-item-text">
          <h3>
            <small><b class="color-light">To Job </b></small>
            <br/>
            <b>{{jobModel.title}}</b></h3>

          <p ng-class="{'text-ellipsis': !ui.isObjectiveExpanded}"
             ng-click="ui.isObjectiveExpanded = !ui.isObjectiveExpanded">
            <i class="color-light">Objective: </i>
            <span>{{jobModel.objective}}</span></p>
        </div>
        <md-divider></md-divider>
      </md-list-item>
    </md-list>


    <div class="dialog-content-padding-sides">

      <form name="form.jobAddNewForm">
        <p class="color-light">Please select the event before which the form will be triggered.</p>
        <md-list class="no-padding">
          <md-list-item class="no-padding">
            <span class="push-right color-light">Trigger before: </span>
            <md-select
              ng-model="lifecycleEvent"
              placeholder="Select Event"
              class="padding-top padding-bottom">
              <md-option ng-repeat="event in jobFormCreateCtrl.jobLifecycleEvents"
                         value="{{event}}"
                         class="full-width">Job {{jobFormCreateCtrl.LANG.JOB.BUTTON[event]}}
              </md-option>
            </md-select>
          </md-list-item>
        </md-list>
      </form>
    </div>

    <div class="list">

      <div class="item item-sub-header">
        <h3>Form fields preview</h3>
      </div>

      <div ng-repeat="field in template.template"
           class="item no-padding card">
        <field-preview field="field"
               name="field.keyName"
               is-disabled="true"></field-preview>
      </div>
    </div>

  </md-dialog-content>

  <div class="md-actions full-width" layout="row">
    <span flex></span>
    <md-button ng-click="jobFormCreateCtrl.cancel()">
      Cancel
    </md-button>
    <md-button type="submit"
               ng-click="jobFormCreateCtrl.sendAddFormRequest(lifecycleEvent)"
               class="md-primary">
      <span>Add</span>
    </md-button>
  </div>

</md-dialog>